<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Untuk Kamu ‚ù§Ô∏è</title>

<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>

<style>
body {
  margin: 0;
  font-family: 'Comic Sans MS', cursive;
  background: linear-gradient(135deg, #ff9ecf, #ffc1e3);
  overflow: hidden;
  text-align: center;
  color: white;
}

.slide {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  animation: fadeIn 1s ease;
  width: 90%;
  max-width: 400px;
}

h1 {
  font-size: 1.8em;
  margin-bottom: 25px;
}

.button-area {
  position: relative;
  height: 120px;
}

button {
  padding: 12px 25px;
  border: none;
  border-radius: 25px;
  background: white;
  color: #ff4fa3;
  font-size: 16px;
  cursor: pointer;
  position: absolute;
  transition: 0.3s;
}

button:hover {
  transform: scale(1.1);
  background: #ffe6f2;
}

@keyframes fadeIn {
  from {opacity: 0; transform: translate(-50%, -40%);}
  to {opacity: 1; transform: translate(-50%, -50%);}
}

.heart {
  position: fixed;
  top: -10px;
  animation: fall linear forwards;
  color: pink;
}

@keyframes fall {
  to { transform: translateY(110vh); opacity: 0; }
}

.bear {
  position: fixed;
  bottom: 0;
  right: 15px;
  width: 180px;
  max-width: 40vw;
  pointer-events: none;
}
</style>
</head>

<body>

<div class="slide">
  <h1 id="text">Selamat datang cintakuu ‚ù§Ô∏è</h1>
  <div id="buttons" class="button-area"></div>
</div>

<audio id="klik" src="klik.mp3"></audio>
<audio id="gbs" src="gbs.mp3"></audio>
<audio id="yay" src="yay.mp3"></audio>

<script>
let step = 0;
let responses = [];

function play(id){
  document.getElementById(id).currentTime = 0;
  document.getElementById(id).play();
}

function moveButton(btn){
  play("gbs");
  const area = btn.parentElement;
  const maxX = area.clientWidth - btn.offsetWidth;
  const maxY = area.clientHeight - btn.offsetHeight;

  const x = Math.random() * maxX;
  const y = Math.random() * maxY;

  btn.style.left = x + "px";
  btn.style.top = y + "px";
}

function next(answerText = null) {
  if(answerText) responses.push(answerText);
  step++;

  const text = document.getElementById("text");
  const buttons = document.getElementById("buttons");

  buttons.innerHTML = "";

  if (step === 1) {
    text.innerHTML = "Aku minta maaf yaa";
    buttons.innerHTML = `
      <button style="left:20px;top:30px" onclick="play('klik');next('Maaf: Iyaa')">Iyaa</button>
      <button style="right:20px;top:30px" onclick="play('klik');next('Maaf: Engga')">Engga</button>`;
  }
  else if (step === 2) {
    text.innerHTML = "Aku sayang sama kamu, kamu sayang aku ngga?";
    buttons.innerHTML = `
      <button style="left:20px;top:30px" onclick="play('klik');next('Sayang: Iya')">Iya</button>
      <button style="right:20px;top:30px" onclick="play('klik');next('Sayang: Engga')">Engga</button>`;
  }
  else if (step === 3) {
    text.innerHTML = "Aku sangat cinta sama kamu, kamu cinta aku ngga?";
    buttons.innerHTML = `
      <button style="left:20px;top:30px" onclick="play('klik');next('Cinta: Aku cinta')">Aku cinta</button>
      <button style="right:20px;top:30px" onclick="play('klik');next('Cinta: G')">G</button>`;
  }
  else if (step === 4) {
    text.innerHTML = "Mau cintai aku sekali lagi?";
    buttons.innerHTML = `
      <button style="left:20px;top:50px" onclick="play('klik');next('Cintai lagi: Mau')">Mau</button>
      <button id="kabur1" style="left:200px;top:50px">Tidak</button>`;
    document.getElementById("kabur1").onclick = function(){ moveButton(this); };
  }
  else if (step === 5) {
    text.innerHTML = "Kamu masih mau sama aku?";
    buttons.innerHTML = `
      <button style="left:20px;top:50px" onclick="play('klik');next('Masih mau: Mau')">Mau</button>
      <button id="kabur2" style="left:200px;top:50px">Engga</button>`;
    document.getElementById("kabur2").onclick = function(){ moveButton(this); };
  }
  else if (step === 6) {
    text.innerHTML = "Udah yakin dengan semua itu?";
    buttons.innerHTML = `
      <button style="left:50%;top:50px;transform:translateX(-50%)"
      onclick="play('yay');next('Yakin: Iya banget')">
      Iyaa aku sangat yakin sayangg
      </button>`;
  }
  else {
    text.innerHTML = "Terimakasih telah menjawab ‚ù§Ô∏è";
    buttons.innerHTML = "";
    showBear();
    sendEmail();
  }
}

function sendEmail() {
  emailjs.init("62lI_6oEr5dhQw33V");
  emailjs.send("service_utzn7ua", "template_p4wklzb", {
    message: responses.join("\n")
  });
}

function showBear() {
  const bear = document.createElement("img");
  bear.src = "bear.gif";
  bear.className = "bear";
  document.body.appendChild(bear);
}

setInterval(() => {
  const heart = document.createElement("div");
  heart.className = "heart";
  heart.innerHTML = "üíó";
  heart.style.left = Math.random() * 100 + "vw";
  heart.style.fontSize = (Math.random() * 20 + 15) + "px";
  heart.style.animationDuration = (Math.random() * 3 + 3) + "s";
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), 6000);
}, 500);

next();
</script>

</body>
</html>
